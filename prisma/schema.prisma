generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id                  String        @id @default(cuid())
  title               String        @unique
  description         String
  categories          Category[]    @relation("ProductCategories")
  brand               Brand?        @relation(fields: [brandId], references: [id], onDelete: Cascade)
  brandId             String?
  price               Decimal
  discountPercentage  Float?
  rating              Float
  stock               Int
  limit               Int?
  images              String[]
  thumbnail           String
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
}

model Category {
  id              String        @id @default(uuid())
  name            String        @unique
  slug            String        @unique
  subCategoryName String
  thumbnail       String
  products        Product[]     @relation("ProductCategories")
  parentId        String?
  parent          Category?     @relation("CategoryToCategory", fields: [parentId], references: [id])
  children        Category[]    @relation("CategoryToCategory")
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt

  @@index([slug])
}

model Brand {
  id        String    @id @default(uuid())
  name      String    @unique
  slug      String    @unique
  thumbnail String?
  products  Product[]

  @@index([slug])
}